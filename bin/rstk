require "rstk"
require "optparse"
params = ARGV.getopts('ac:e:d:', 'all', 'home')

# task.add_from_cmdline({"name"=> "add test"})
#  task.add_from_cmdline({"name"=> "add test", "category" => "waiting"})
# task.delete( 20160214122152 )
# task.delete( 201 )
# task.add
#
#
kaisya = true
if params["home"]
  kaisya = false
end

if params["a"]
  # add task
  task = Rstk::Task.new
  task.add
elsif params["e"]
  # edit task
  task = Rstk::Task.new
  task.edit params["e"]
elsif params["c"]
  # show category task
  params["c"]
  task = Rstk::Task.new
  task.show({"category" => "#{params['c']}"})
elsif params["all"]
  task = Rstk::Task.new
  task.show({})
elsif params["d"]
  task = Rstk::Task.new
  task.delete(params["d"])
else
  task = Rstk::Task.new

  task.where([
    { "due-date" => Time.now.strftime("%Y/%m/%d"), "done" => false, "kaisya" => kaisya  },
    { "category" => "next action", "done" => false, "kaisya" => kaisya },
    { "category" => "waiting", "done" => false, "kaisya" => kaisya },
    { "category" => "", "done" => false, "kaisya" => kaisya  }])
end

